model Session {
  id String @id @default(ulid())

  expirationDate DateTime

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String

  @@index([userId])
}

model Verification {
  id        String   @id @default(ulid())
  createdAt DateTime @default(now())

  /// The type of verification being performed.
  type      VerificationType
  /// The target of the verification (e.g., the email address).
  target    String
  /// The secret key used to generate the OTP.
  secret    String
  /// The algorithm used for OTP generation.
  algorithm String
  /// The number of digits in the OTP.
  digits    Int
  /// The validity period of the OTP in seconds.
  period    Int
  /// The set of valid characters for the OTP.
  charSet   String
  /// The timestamp when this verification record can be safely deleted.
  expiresAt DateTime?

  @@unique([target, type])
}

enum VerificationType {
  onboarding
  reset_password
  change_email
  two_fa
}

model Connection {
  id           String @id @default(ulid())
  /// The name of the OAuth provider (e.g., "github").
  providerName String
  /// The user's unique ID from the OAuth provider.
  providerId   String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String

  @@unique([providerName, providerId])
  @@unique([providerName, userId])
  @@index([userId])
}
